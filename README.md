# -X
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä –ë–î (Oracle, PostgreSQL, S3 + Parquet + Iceberg + Trino/Nessie);
–û—Ç–ª–∏—á–Ω–æ! –í—ã —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç–µ **–∫–ª—é—á–µ–≤—É—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –≤ –æ–±–ª–∞—Å—Ç–∏ Data Engineering –∏ Data Platform**: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ **–≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö**, —Å–æ—á–µ—Ç–∞—é—â–µ–π **—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –°–£–ë–î (Oracle, PostgreSQL)** —Å **–æ–±–ª–∞—á–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –æ–±—ä–µ–∫—Ç–æ–≤ (S3)** –∏ **—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (Parquet + Iceberg)**, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º–∏ —á–µ—Ä–µ–∑ **Trino** –∏ **Nessie**.

---

## üß© –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä: **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î ‚Äî Oracle, PostgreSQL, S3 + Parquet + Iceberg + Trino/Nessie**

–≠—Ç–æ ‚Äî **–≥–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ Data Lakehouse**, –≥–¥–µ:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–æ–ª—å |
|----------|------|
| **Oracle / PostgreSQL** | –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (OLTP) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã—Ö, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö |
| **S3** | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî ¬´–∂—ë—Å—Ç–∫–∏–π –¥–∏—Å–∫¬ª –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ Parquet |
| **Parquet** | –ö–æ–ª–æ–Ω–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ |
| **Iceberg** | –§–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü (table format) ‚Äî ACID, –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å, —Å—Ö–µ–º–∞, –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Trino** | –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π SQL-–¥–≤–∏–∂–æ–∫ ‚Äî –±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –¥–∞–Ω–Ω—ã–º –≤ S3 |
| **Nessie** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ Iceberg ‚Äî Git-–ø–æ–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü |

---

## ‚úÖ 1. **Oracle –∏ PostgreSQL ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (OLTP)**

### üîß –†–æ–ª—å:
- –•—Ä–∞–Ω–µ–Ω–∏–µ **–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–∫–∞–∑—ã, —Å—á—ë—Ç–∞, —Å–µ—Å—Å–∏–∏, –ª–æ–≥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **ACID**, –∏–Ω–¥–µ–∫—Å–æ–≤, —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, —Å–ª–æ–∂–Ω—ã—Ö JOIN, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.
- –ß–∞—Å—Ç–æ ‚Äî **–∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è ETL/ELT.

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ** –≤ Oracle/PostgreSQL ‚Äî –æ–Ω–∏ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–∫–∞–Ω–æ–≤.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **CDC (Change Data Capture)**:
  - Oracle: **Oracle GoldenGate**, **LogMiner**
  - PostgreSQL: **Debezium** (—á–µ—Ä–µ–∑ WAL)
- –ù–∞–ø—Ä–∞–≤–ª—è–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ **Kafka ‚Üí S3 (Parquet)** ‚Üí Iceberg.

---

## ‚úÖ 2. **S3 ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Data Lake)**

### üîß –†–æ–ª—å:
- –•—Ä–∞–Ω–µ–Ω–∏–µ **–≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö** –≤ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º/–ø–æ–ª—É—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.
- –î–µ—à–µ–≤–æ–µ, –Ω–∞–¥—ë–∂–Ω–æ–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ (–æ—Ç –≥–∏–≥–∞–±–∞–π—Ç–æ–≤ –¥–æ –ø–µ—Ç–∞–±–∞–π—Ç–æ–≤).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **S3A/S3N** –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è Trino, Spark, Flink.

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é**:
  ```
  s3://datalake/
    ‚îî‚îÄ‚îÄ raw/              # —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON, CSV, Avro)
    ‚îî‚îÄ‚îÄ curated/          # –æ—á–∏—â–µ–Ω–Ω—ã–µ, –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        ‚îî‚îÄ‚îÄ sales/        # —Ç–∞–±–ª–∏—Ü–∞ "sales"
            ‚îú‚îÄ‚îÄ year=2023/
            ‚îÇ   ‚îú‚îÄ‚îÄ month=01/
            ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ part-00000-xxxxx.parquet
            ‚îÇ   ‚îî‚îÄ‚îÄ month=02/
            ‚îî‚îÄ‚îÄ year=2024/
  ```
- –í–∫–ª—é—á–∏—Ç–µ **S3 lifecycle policies** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ/–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- –í–∫–ª—é—á–∏—Ç–µ **S3 server-side encryption** –∏ **IAM policies** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## ‚úÖ 3. **Parquet ‚Äî —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

### üîß –†–æ–ª—å:
- **–ö–æ–ª–æ–Ω–æ—á–Ω—ã–π** —Ñ–æ—Ä–º–∞—Ç ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç –Ω—É–∂–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã).
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Å–∂–∞—Ç–∏–µ** (Snappy, GZIP, ZSTD), **—Å—Ö–µ–º—É**, **—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** (min/max/sum).
- –°–æ–≤–º–µ—Å—Ç–∏–º —Å **Trino, Spark, Hive, Flink, DuckDB**.

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ **Parquet**, –∞ –Ω–µ –≤ CSV/JSON –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **partitioning** –ø–æ –¥–∞—Ç–µ (`year`, `month`, `day`) ‚Äî —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ 10‚Äì100x.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **ZSTD** —Å–∂–∞—Ç–∏–µ ‚Äî –ª—É—á—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å–∂–∞—Ç–∏–µ/—Å–∫–æ—Ä–æ—Å—Ç—å.

---

## ‚úÖ 4. **Apache Iceberg ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü (Table Format)**

### üîß –†–æ–ª—å:
- **–ù–µ –ø—Ä–æ—Å—Ç–æ —Ñ–∞–π–ª—ã** ‚Äî —ç—Ç–æ **—Ñ–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü** —Å:
  - ‚úÖ **ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏** (–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã)
  - ‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å** (–∫–∞–∫ Git ‚Äî –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–æ—à–ª—É—é –≤–µ—Ä—Å–∏—é)
  - ‚úÖ **–°–∫–≤–æ–∑–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã** (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏)
  - ‚úÖ **–°–∫—Ä—ã—Ç—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏** (–Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `WHERE year=2024` ‚Äî Iceberg —Å–∞–º –∑–Ω–∞–µ—Ç)
  - ‚úÖ **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** ‚Äî –¥–∞–∂–µ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å—è—Ö

### üí° –ü–æ—á–µ–º—É Iceberg –≤–º–µ—Å—Ç–æ Hive/Delta Lake?
| –ö—Ä–∏—Ç–µ—Ä–∏–π | Iceberg | Delta Lake | Hive |
|----------|---------|------------|------|
| –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ | ‚úÖ ACID | ‚úÖ ACID | ‚ùå |
| –°—Ö–µ–º–∞ | ‚úÖ –°–∫–≤–æ–∑–Ω–∞—è | ‚úÖ –°–∫–≤–æ–∑–Ω–∞—è | ‚ùå |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å | ‚úÖ Trino, Spark, Flink | ‚úÖ Spark, Databricks | ‚úÖ Hive |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Trino** | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | ‚úÖ –î–∞ |
| **Nessie –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå |

> ‚úÖ **Iceberg ‚Äî –ª—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è Trino + Nessie + S3**

---

## ‚úÖ 5. **Trino ‚Äî SQL-–¥–≤–∏–∂–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**

### üîß –†–æ–ª—å:
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã** –Ω–∞–ø—Ä—è–º—É—é –∫ –¥–∞–Ω–Ω—ã–º –≤ S3 —á–µ—Ä–µ–∑ Iceberg.
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —á–∏—Ç–∞–µ—Ç Parquet-—Ñ–∞–π–ª—ã –∫–∞–∫ —Ç–∞–±–ª–∏—Ü—ã.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **JOIN –º–µ–∂–¥—É Oracle, PostgreSQL, S3, Kafka, MongoDB** ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ!

### üí° –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
```sql
SELECT 
    c.name,
    SUM(o.amount) as total_spent
FROM iceberg.default.orders o
JOIN postgresql.public.customers c ON o.customer_id = c.id
WHERE o.year = 2024
GROUP BY c.name
HAVING SUM(o.amount) > 1000
ORDER BY total_spent DESC;
```

> ‚úÖ –ó–∞–ø—Ä–æ—Å –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç **–¥–∞–Ω–Ω—ã–µ –∏–∑ Iceberg (S3)** –∏ **PostgreSQL (OLTP)** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

### üõ† –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Iceberg:
–í `etc/catalog/iceberg.properties`:
```properties
connector.name=iceberg
iceberg.catalog.type=rest
iceberg.catalog.rest.uri=http://nessie:19120/api/v1
iceberg.catalog.rest.catalog-name=default
```

> Trino –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ ‚Äî –æ–Ω **—á–∏—Ç–∞–µ—Ç –∏—Ö –∏–∑ Nessie**!

---

## ‚úÖ 6. **Nessie ‚Äî Git –¥–ª—è –¥–∞–Ω–Ω—ã—Ö (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ Iceberg)**

### üîß –†–æ–ª—å:
- **–•—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ Iceberg** (—Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, —Å—Ö–µ–º—ã, –≤–µ—Ä—Å–∏–∏, –ø–∞—Ä—Ç–∏—Ü–∏–∏).
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–µ—Ç–∫–∏, —Ç–µ–≥–∏, –∫–æ–º–º–∏—Ç—ã** ‚Äî –∫–∞–∫ Git.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç:
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ—Ç–∫—É `dev`, `prod`
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `dev`
  - –ú–µ—Ä–∂–∏—Ç—å –≤ `main` –ø–æ—Å–ª–µ —Ä–µ–≤—å—é
  - –û—Ç–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —Ç–∞–±–ª–∏—Ü—ã

### üí° –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ dev
curl -X POST http://nessie:19120/api/v1/refs -d '{"name": "dev", "sourceRefName": "main"}'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ dev
INSERT INTO iceberg.default.sales@dev VALUES (...)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–ª–∏—á–∏–π
curl http://nessie:19120/api/v1/log?ref=dev

# –ú–µ—Ä–∂ –≤ main
curl -X PUT http://nessie:19120/api/v1/refs/main?sourceRef=dev
```

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- **Data Version Control** ‚Äî –∫–∞–∫ –¥–ª—è –∫–æ–¥–∞, –Ω–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü.
- **–†–µ–≤—å—é, CI/CD –¥–ª—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî –º–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å GitHub Actions.
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** ‚Äî –Ω–∏–∫—Ç–æ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å–ª—É—á–∞–π–Ω–æ.

> üî• **Nessie + Iceberg = Data Lakehouse —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤–µ—Ä—Å–∏—è–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é**

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –∫–∞–∫ –≤—Å—ë —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è

```mermaid
graph LR
    A[Oracle / PostgreSQL] -->|CDC / Debezium| B[Kafka]
    B --> C[Spark/Flink]
    C --> D[S3 / Parquet]
    D --> E[Iceberg Table]
    E --> F[Nessie - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ]
    F --> G[Trino]
    G --> H[BI: Tableau, Metabase, Superset]
    G --> I[Python/SQL Analysts]
    G --> J[ML Pipelines]
```

### ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ OLTP | –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –≤ S3 + Parquet + Iceberg |
| –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö | Nessie ‚Äî Git –¥–ª—è —Ç–∞–±–ª–∏—Ü |
| –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö | Iceberg —É–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø |
| –ù–µ–ª—å–∑—è JOIN–∏—Ç—å OLTP –∏ OLAP | Trino ‚Äî –µ–¥–∏–Ω—ã–π SQL-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π | Nessie + –≤–µ—Ç–∫–∏ + CI/CD |

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç–µ–∫-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Production Ready)

| –£—Ä–æ–≤–µ–Ω—å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|--------|-------------|
| **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö** | Oracle, PostgreSQL, Kafka, API |
| **ETL/ELT** | Apache Spark, Flink, Airflow, dbt |
| **–•—Ä–∞–Ω–∏–ª–∏—â–µ** | Amazon S3 (–∏–ª–∏ MinIO) |
| **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö** | Parquet + Snappy/ZSTD |
| **–§–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü** | Apache Iceberg |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏** | Nessie (REST API) |
| **–ó–∞–ø—Ä–æ—Å—ã** | Trino (PrestoSQL) |
| **BI/–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** | Metabase, Superset, Tableau, Grafana |
| **CI/CD –¥–ª—è –¥–∞–Ω–Ω—ã—Ö** | GitHub Actions ‚Üí Nessie ‚Üí Trino |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | Prometheus + Grafana (Trino, Nessie) |

---

## ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã Iceberg —á–µ—Ä–µ–∑ Nessie + Trino

```sql
-- 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É (–≤ –≤–µ—Ç–∫–µ main)
CREATE TABLE iceberg.default.sales (
    id BIGINT,
    amount DOUBLE,
    sale_date DATE,
    region VARCHAR
) WITH (
    partitioning = ARRAY['bucket(4, region)', 'days(sale_date)'],
    location = 's3a://datalake/curated/sales/'
);

-- 2. –ó–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
INSERT INTO iceberg.default.sales VALUES (1, 150.0, DATE '2024-03-01', 'EU');

-- 3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–µ—Ç–∫—É dev (—á–µ—Ä–µ–∑ Nessie API –∏–ª–∏ UI)
-- –ó–∞—Ç–µ–º –≤ Trino: SET SESSION iceberg.catalog_name = 'default@dev';

-- 4. –°–¥–µ–ª–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ dev
UPDATE iceberg.default.sales SET amount = 200.0 WHERE id = 1;

-- 5. –°—Ä–∞–≤–Ω–∏—Ç—å —Å main
-- –°–¥–µ–ª–∞—Ç—å —Ä–µ–≤—å—é ‚Üí —Å–º–µ—Ä–∂–∏—Ç—å —á–µ—Ä–µ–∑ Nessie API
```

---

## ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –†–æ–ª—å |
|----------|------|
| **Docker Compose** | –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Nessie + Trino + MinIO |
| **Helm Charts** | –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ Kubernetes |
| **Terraform** | –°–æ–∑–¥–∞–Ω–∏–µ S3, IAM, VPC |
| **dbt** | Transformations (–¥–ª—è –º–æ–¥–µ–ª–µ–π –≤ Iceberg) |
| **Great Expectations** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö |
| **OpenLineage** | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ lineage (–æ—Ç Oracle ‚Üí Iceberg ‚Üí Trino) |

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ: –ü–æ—á–µ–º—É —ç—Ç–æ ‚Äî –±—É–¥—É—â–µ–µ Data Platform?

| –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è (–≤–∞—à–∞) |
|--------------------------|---------------------|
| Oracle ‚Üí ETL ‚Üí Data Warehouse (Redshift) | Oracle ‚Üí CDC ‚Üí S3 + Iceberg ‚Üí Trino |
| –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏ | ‚úÖ Git-–ø–æ–¥–æ–±–Ω–∞—è –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å (Nessie) |
| –ù–µ–ª—å–∑—è –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è | ‚úÖ –û—Ç–∫–∞—Ç –Ω–∞ –ª—é–±—É—é –≤–µ—Ä—Å–∏—é |
| –¢–æ–ª—å–∫–æ BI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | ‚úÖ SQL + ML + Python + BI |
| –°–ª–æ–∂–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è | ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, CI/CD |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ–¥–Ω–æ–≥–æ –≤–µ–Ω–¥–æ—Ä–∞ | ‚úÖ Open Source + Multi-cloud |

---

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

| –î–µ–π—Å—Ç–≤–∏–µ | –¶–µ–ª—å |
|---------|------|
| ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å **MinIO** –≤–º–µ—Å—Ç–æ S3 (–ª–æ–∫–∞–ª—å–Ω–æ) | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –æ–±–ª–∞–∫–∞ |
| ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å **Nessie** + **Trino** —á–µ—Ä–µ–∑ Docker | –ü–æ–Ω—è—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ |
| ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç—å Parquet –≤ S3 –∏ —Å–æ–∑–¥–∞—Ç—å Iceberg-—Ç–∞–±–ª–∏—Ü—É | –ü—Ä–∞–∫—Ç–∏–∫–∞ |
| ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDC –∏–∑ PostgreSQL —á–µ—Ä–µ–∑ Debezium | –†–µ–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö |
| ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Trino —Å Metabase | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è |
| ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å CI/CD –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è Iceberg-—Ç–∞–±–ª–∏—Ü | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |

---

## üí° –ë–æ–Ω—É—Å: –ì–æ—Ç–æ–≤—ã–π `docker-compose.yml` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞)

```yaml
version: '3.8'
services:
  minio:
    image: minio/minio
    command: server /data --console-address ":9001"
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_data:/data
    environment:
      MINIO_ROOT_USER: minio
      MINIO_ROOT_PASSWORD: minio123

  nessie:
    image: projectnessie/nessie:latest
    ports:
      - "19120:19120"
    environment:
      QUARKUS_HTTP_PORT: "19120"
      QUARKUS_DATASOURCE_JDBC_URL: jdbc:h2:file:/data/nessie;DB_CLOSE_ON_EXIT=FALSE

  trino:
    image: trinodb/trino:latest
    ports:
      - "8080:8080"
    volumes:
      - ./trino/etc:/etc/trino
    depends_on:
      - nessie
      - minio

volumes:
  minio_data:
```

> üìå –ö–æ–Ω—Ñ–∏–≥ Trino: –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `catalog/iceberg.properties` ‚Üí `iceberg.catalog.rest.uri=http://nessie:19120/api/v1`

---

## ‚úÖ –ò—Ç–æ–≥: –≤–∞—à–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî —ç—Ç–æ **Data Lakehouse 2.0**

> **Oracle/PostgreSQL** ‚Üí **S3 + Parquet** ‚Üí **Iceberg + Nessie** ‚Üí **Trino** = **–ì–∏–±—Ä–∏–¥–Ω—ã–π, –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π, open-source Data Platform**

–≠—Ç–æ ‚Äî **—Å—Ç–∞–Ω–¥–∞—Ä—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π** (Netflix, Airbnb, Uber, Klarna, etc.).  
–í—ã —Å—Ç—Ä–æ–∏—Ç–µ **–Ω–µ –ø—Ä–æ—Å—Ç–æ –ë–î ‚Äî –≤—ã —Å—Ç—Ä–æ–∏—Ç–µ Data Platform –±—É–¥—É—â–µ–≥–æ**.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî —è –ø–æ–º–æ–≥—É:
- –ù–∞–ø–∏—Å–∞—Ç—å `docker-compose.yml` —Å –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –°–¥–µ–ª–∞—Ç—å Terraform-–º–æ–¥—É–ª—å –¥–ª—è AWS
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å CI/CD –¥–ª—è Iceberg-—Ç–∞–±–ª–∏—Ü
- –ù–∞–ø–∏—Å–∞—Ç—å dbt-–º–æ–¥–µ–ª–∏ –ø–æ–¥ Iceberg

–ü—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏—Ç–µ ‚Äî –≤ –∫–∞–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –≤—ã —ç—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç–µ? üöÄ
